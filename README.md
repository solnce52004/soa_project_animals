
*************************

### Тестовое задание:

**Написать набор сервисов для SOA WEB-приложения.**.<br>
приложение должно реализовывать такие сервисы:

**1. Сервис авторизации:**<br>
***1.1. Сервис "Валидация":***

- Не зарегистрированный пользователь должен иметь возможность проверить доступность имени через сервис (валидации).

***1.2. Сервис "Регистрация":***<br>
создание пользователя (регистрация).
- должен создаваться пользователь с именем и паролем.
- имя должно быть уникальным.
- сразу после создания текущий пользователь должен авторизоваться в том же запросе.

***1.3. Сервис "Аутентификация":***

- созданный в системе пользователь должен иметь возможность авторизоваться, передав в сервис имя и пароль.
- Количество неудачных попыток авторизации - не должно превышать 10 за 1 час
- и сбрасываться при успешной авторизации.

***1.4. Сервис "Авторизация":***

- авторизованный пользователь должен иметь возможность создавать /редактировать/удалить животных

**2. Сервис "Animals":**

- создавать /редактировать/удалить животных<br>

    - Вид(из списка-справочника @Immutable),
    - дата рождения,
    - пол,
    - Кличка(уникальна)

- получить список своих животных (id, name?).
- получить детали любого животного по id.

**Также учесть:** 

- Фронт приложение не нужно, только бекэнд часть.
- Рекомендуется использовать Spring и Hibernate (можно c JPA).
- Все взаимодействие должно происходить с использованием JSON форамата данных.

- Все ошибки должны иметь номера и текстовую расшифровки.
- Ошибки, в случае возникновения, также должны передаваться в виде JSON объекта.

- В качестве базы данных можно взять PostgreSQL, Mongo или любую InMemory базу.
    - (но, тогда jar-ик надо добавить в архив)
    - Flyway/Liquibase?

*************************

Ниже приведено описание реализации поставленной задачи с соблюдением основных требований.
Работает однопоточно?

Доступные шаги использования:
1. 

Все запросы идемпотентны.

#### Реализация:
В кодовой базе проекта используются актуальные версии библиотек (Spring Boot 2.4.3).<br>
Основа проекта - Spring Boot.

1. Сохранение в базу (PostgreSQL)
2. Сохранение изменений состояний бизнес-сущностей в базу (Postgres) (добавлены индексы на ключевых полях для оптимизации запросов)
3. Версионирование изменений базы данных (Flyway)
4. Логирование (архивирование) в локальную директорию (Log4j2)
5. Обработка http-ошибок
6. Тесты
7. Описание api-методов (SwaggerUI)
8. UML-диаграмма?

#### Использованы паттерны проектированя (яркие примеры в сервисах-обработчиках запросов и переходов состояний):
1. Singleton
2. Strategy
3. Command
4. Register
5. Chain of responsibility

#### Требования
- JDK 11
- mvn 3.8.2

#### Профили:
- dev - По умолчанию, база данных H2 (In memory)
- prod - База данных PostgreSQL
- для тестирования - отдельная база (и логирование в отдельную директорию)/testcontainers

#### Документация API Auth
[Auth Swagger Api Documentation](http://localhost:8020/auth/swagger-ui/)

| Method | Description | URL |
|----------------|---------|----------------|
| GET | Создать | {URL}/auth/api/v1/sign-in |

#### Документация API Animals
[Animals Swagger Api Documentation](http://localhost:8030/animals/swagger-ui/)

| Method | Description | URL |
|----------------|---------|----------------|
| GET | Создать | {URL}/animals/api/v1/create |
